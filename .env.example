# MUDBasher Proxy Configuration
# Copy this file to .env and customize
# Never commit .env files with real credentials!

# ============================================
# Core Server Configuration
# ============================================

# WebSocket proxy port (default: 6200)
WS_PORT=6200

# Default MUD server hostname (used if not specified by client)
TN_HOST=muds.maldorne.org

# Default MUD server port
TN_PORT=5010

# Set to 1 to disable TLS (for testing only)
DISABLE_TLS=0

# ============================================
# Apple Push Notification Service (APNS)
# ============================================

# Path to AuthKey.p8 file
APNS_KEY_PATH=

# APNS key ID
APNS_KEY_ID=

# Apple Developer Team ID
APNS_TEAM_ID=

# Bundle identifier (e.g., com.yourcompany.mudbasher)
APNS_TOPIC=

# Environment: sandbox or production
APNS_ENVIRONMENT=sandbox

# Optional background push tuning
# SILENT_PUSH_INTERVAL_MS=1200000
# ACTIVITY_PUSH_INTERVAL_MS=120000
# ACTIVITY_PUSH_ACK_TIMEOUT_MS=15000
# ACTIVITY_PUSH_FALLBACK_COOLDOWN_MS=60000
# ACTIVITY_PUSH_FALLBACK_MAX_PER_HOUR=6
# ACTIVITY_PUSH_MAX_SNIPPET_LENGTH=100

# ============================================
# E2E Test Configuration
# ============================================

# Test timeout in milliseconds
TEST_TIMEOUT_MS=30000

# Proxy port for E2E tests
TEST_PROXY_PORT=6299

# Mock MUD server port
TEST_MOCK_PORT=6301

# CI environment detection
# Set to '1' to force mock MUD usage, '0' for real MUD, or 'auto' to detect
USE_MOCK_MUD=auto

# Skip E2E tests (set to '1' to skip)
SKIP_E2E_TESTS=0

# ============================================
# Development / Debug
# ============================================

# Enable debug logging (1=true, 0=false)
DEBUG=0

# Only allow connections to default server (for testing)
ONLY_ALLOW_DEFAULT_SERVER=false

# ─── App Authentication ────────────────────────────────────────────────────────
# Restrict WebSocket connections to the official iOS app only.
# REQUIRE_APP_AUTH=true

# Apple App Attest (required when REQUIRE_APP_AUTH=true)
# APPATTEST_BUNDLE_ID=com.example.yourapp
# APPATTEST_TEAM_ID=AAABBBCCC1

# mTLS client certificate fallback (for simulator/debug builds)
# MTLS_CLIENT_CA_PATH=./config/client-ca/ca.pem

# Path to persist attested keys (default: ./config/attested-keys.json)
# ATTESTED_KEYS_PATH=./config/attested-keys.json
